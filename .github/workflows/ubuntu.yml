name: 🐧 Debug Ubuntu with tmate

on:
  workflow_dispatch:

jobs:
  ubuntu-debug:
    name: Debug via tmate on Ubuntu
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Start tmate session
        uses: mxschmitt/action-tmate@v3
        with:
          limit-access-to-actor: false  # Cho phép bất kỳ ai có link SSH đều vào được

      - name: Keep session alive
        run: |
          echo "🟢 Starting 6-hour keep-alive loop..."
          for ((i = 1; i <= 72; i++)); do
            echo "⏳ Keep-alive ping $i/72 at $(date)"
            sleep 300  # 5 phút
          done
          echo "⛔ Keep-alive finished after 6 hours."
